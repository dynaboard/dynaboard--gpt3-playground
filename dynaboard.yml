runtimeVersion: 0.3.4
name: GPT-3 Playground
description: An OpenAI GPT-3 playground
type: com.dynaboard/project
nodes:
  ROOT_NODE:
    type: ROOT_NODE
    name: ROOT_NODE
    slots:
      templates:
        - nodeID: 10252023-dad3-4102-9989-a5d3fc1e5cfc
          orderKey: a0
      resources:
        - nodeID: 296c1b76-f23c-425f-b12d-d231b123a607
          orderKey: a0
        - nodeID: 9f76cf8a-7ebd-4b65-bf9e-d7381f5f9780
          orderKey: a1
      config:
        - nodeID: 20073620-98a1-4562-93cc-0a98915288bf
          orderKey: a3
      pages:
        - nodeID: 8c707fa9-0c93-4ac8-9060-d26e67a45814
          orderKey: a0
    properties:
      selectedTheme: null
      showDynaboardBranding: true
      robotsTxt: null
      timezone: America
  20073620-98a1-4562-93cc-0a98915288bf:
    type: CONFIG
    name: OpenAIAPIKey
    properties:
      value:
      type: secret
  296c1b76-f23c-425f-b12d-d231b123a607:
    type: RESOURCE/HTTP
    name: OpenAI
    properties:
      method: GET
      bodyType: application/json
      profiles:
        - environment: ''
          baseURL: https://api.openai.com/
          headers:
            - key: Content-Type
              value: application/json
            - key: Authorization
              value: Bearer ${{OpenAIAPIKey}}
  2e07c81b-0fac-4e51-9008-b03c98f8be28:
    type: FUNCTION
    name: listModels
    properties:
      action:
        path: v1/models
        body: ''
        headers: []
        method: GET
        bodyType: application/json
        targetNode:
          ref: 296c1b76-f23c-425f-b12d-d231b123a607
        actionType: PERFORM_REQUEST
      runOnPageLoad: true
  39f0bfb4-80e2-48d8-8c59-5ed2c1ff796a:
    type: INPUT
    name: promptInput
    properties:
      width: '9'
      height: '16'
      type: textarea
      leftIcon: ''
      rightIcon: ''
      onFocus: ''
      onBlur: ''
      label: Prompt
  3e3b53d2-aae6-48cd-b5e5-e3d2b1177d64:
    type: INPUT
    name: maxTokensInput
    properties:
      top: '38'
      left: '9'
      width: '4'
      height: '4'
      label: Max Tokens
      type: number
      value: '128'
  57657691-f009-4708-a0e4-a4e539f9ef5d:
    type: BUTTON
    name: button2
    properties:
      top: '13'
      left: '10'
      width: '3'
      height: '2'
      onClick:
        function:
          ref: db78f0e8-fc02-4215-ae96-2089359fe736
      text: Copy
      leftIcon: ClipboardIcon
      backgroundColor: text.muted
      variant: ghost
  77f67777-64fb-421f-aa7f-850df0be61a5:
    type: SPINNER
    name: spinner1
    properties:
      isVisible: '{{listModels.loading}}'
      left: '11'
      width: '2'
      height: '4'
  84cd2fdb-753d-4629-8bb9-1b954e319d91:
    type: BUTTON
    name: button1
    properties:
      top: '9'
      width: '3'
      height: '8'
      text: Submit
      leftIcon: ''
      rightIcon: ArrowRightIcon
      onClick: null
      left: '10'
      isLoading: '{{performCompletion.loading}}'
  8c707fa9-0c93-4ac8-9060-d26e67a45814:
    type: PAGE
    name: index
    slots:
      canvas:
        - nodeID: 96e5e239-6d55-4faa-8b3c-a24fc626e464
          orderKey: Zr
        - nodeID: 57657691-f009-4708-a0e4-a4e539f9ef5d
          orderKey: Zs
        - nodeID: 77f67777-64fb-421f-aa7f-850df0be61a5
          orderKey: Zt
        - nodeID: 9d94564b-de70-43dc-a75d-5df235777655
          orderKey: Zu
        - nodeID: 3e3b53d2-aae6-48cd-b5e5-e3d2b1177d64
          orderKey: Zv
        - nodeID: b847742d-30d9-4808-8c27-f9df6f00bce1
          orderKey: Zw
        - nodeID: e4cde8a5-347b-4fec-af3c-372544813735
          orderKey: Zx
        - nodeID: e4696eea-a536-475d-89f7-eff0dbf39282
          orderKey: Zy
        - nodeID: bcada180-0de9-4925-b838-02596ebc5174
          orderKey: a0
      functions:
        - nodeID: 2e07c81b-0fac-4e51-9008-b03c98f8be28
          orderKey: Zz
        - nodeID: 90408881-d778-475f-9538-2075e94f5c28
          orderKey: a0
        - nodeID: db78f0e8-fc02-4215-ae96-2089359fe736
          orderKey: a1
  90408881-d778-475f-9538-2075e94f5c28:
    type: FUNCTION
    name: performCompletion
    properties:
      action:
        path: v1/engines/{{modelInput.value}}/completions
        body: |-
          {
            "prompt": {{ promptInput.value }},
            "temperature": {{ Number(temperatureInput.value) }},
            "max_tokens": {{ Number(maxTokensInput.value) }}
          }
        headers: []
        method: POST
        bodyType: application/json
        targetNode:
          ref: 296c1b76-f23c-425f-b12d-d231b123a607
        actionType: PERFORM_REQUEST
      onSuccess: ''
      onFailure: ''
  96e5e239-6d55-4faa-8b3c-a24fc626e464:
    type: TEXT
    name: text2
    properties:
      top: '43'
      width: '12'
      height: '16'
      value: View source
      renderMode: link
      href: https://github.com/dynaboard/dynaboard--gpt3-playground
      showExternalIndicator: true
      textAlign: center
      verticalAlign: top
  9d94564b-de70-43dc-a75d-5df235777655:
    type: DROPDOWN
    name: modelInput
    properties:
      top: '38'
      width: '4'
      height: '4'
      label: Model
      values: '{{listModels.data.data.map(d => d.id)}}'
      displayValues: ''
      value: curie
      enableFilter: true
  9f76cf8a-7ebd-4b65-bf9e-d7381f5f9780:
    type: RESOURCE/BROWSER
    name: browser1
  b847742d-30d9-4808-8c27-f9df6f00bce1:
    type: INPUT
    name: temperatureInput
    properties:
      top: '38'
      left: '5'
      width: '4'
      height: '4'
      label: Temperature
      type: number
      value: '0.9'
  bcada180-0de9-4925-b838-02596ebc5174:
    type: TEXT
    name: text1
    properties:
      width: '10'
      height: '4'
      value: '## GPT-3 Playground'
      renderMode: markdown
  db78f0e8-fc02-4215-ae96-2089359fe736:
    type: FUNCTION
    name: copyToClipboard
    properties:
      action:
        clipboardText: '{{outputInput.value}}'
        path: ''
        target: _self
        targetNode:
          ref: 9f76cf8a-7ebd-4b65-bf9e-d7381f5f9780
        actionType: COPY_TO_CLIPBOARD
  e4696eea-a536-475d-89f7-eff0dbf39282:
    type: INPUT
    name: outputInput
    properties:
      isEnabled: true
      top: '14'
      width: '12'
      height: '22'
      label: Output
      type: textarea
      value: >-
        {{ performCompletion.data?.choices[0].text.trim().replace(/\\n/g, '\n')
        }}
      placeholder: Output will appear here.
  e4cde8a5-347b-4fec-af3c-372544813735:
    type: FORM
    name: form1
    slots:
      canvas:
        - nodeID: 39f0bfb4-80e2-48d8-8c59-5ed2c1ff796a
          orderKey: Zz
        - nodeID: 84cd2fdb-753d-4629-8bb9-1b954e319d91
          orderKey: a0
    properties:
      top: '5'
      width: '12'
      height: '8'
      borderRadius: 4px
      onSubmit:
        function:
          ref: 90408881-d778-475f-9538-2075e94f5c28
